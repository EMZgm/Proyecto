{"version":3,"sources":["AuthPage.js","ExpenseManager.js","App.js","index.js"],"names":["API_URL","process","AuthPage","_ref","onLoginSuccess","isLogin","setIsLogin","useState","email","setEmail","password","setPassword","error","setError","_jsx","className","children","_jsxs","onSubmit","async","e","preventDefault","url","concat","response","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","token","alert","err","message","type","value","onChange","target","placeholder","required","onClick","ExpenseManager","onLogout","view","setView","expenses","setExpenses","incomes","setIncomes","categories","setCategories","expenseFields","setExpenseFields","incomeFields","setIncomeFields","expenseForm","setExpenseForm","incomeForm","setIncomeForm","editingItem","setEditingItem","editForm","setEditForm","newFieldName","setNewFieldName","newCatName","setNewCatName","dragItem","useRef","dragOverItem","authedFetch","options","arguments","length","undefined","_objectSpread","loadData","then","r","useEffect","saveOrder","orderedIds","items","map","i","id","moveItem","index","direction","context","isExpense","_items","temp","onDragEnd","classList","remove","draggedItemContent","splice","current","handleSort","openEditModal","item","flatData","custom_data","handleCreateChange","name","handleSubmit","handleDelete","window","confirm","handleAddCategory","allCats","Set","c","totalInc","reduce","sum","parseFloat","amount","totalExp","renderForm","fields","state","handleChange","_Fragment","field","label","field_key","step","is_core","renderItemContent","allData","fieldsConfig","startsWith","f","draggable","onDragStart","add","onDragEnter","onDragOver","disabled","handleDeleteField","style","opacity","padding","marginTop","handleAddField","find","handleDeleteCategory","toFixed","color","inc","exp","App","setToken","localStorage","getItem","setItem","removeItem","handleLogout","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fae24647.chunk.js","sourcesContent":["import React, { useState } from 'react';\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// Este componente maneja tanto el Login como el Registro\nfunction AuthPage({ onLoginSuccess }) {\n  const [isLogin, setIsLogin] = useState(true); // Controla si es Login o Registro\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(null);\n\n    const url = isLogin ? `${API_URL}/login` : `${API_URL}/register`;\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Algo sali√≥ mal');\n      }\n\n      if (isLogin) {\n        // Si fue login exitoso, llamamos a la funci√≥n del App.js\n        onLoginSuccess(data.token);\n      } else {\n        // Si fue registro exitoso, le decimos al usuario que ahora inicie sesi√≥n\n        alert('¬°Registro exitoso! Ahora, por favor inicia sesi√≥n.');\n        setIsLogin(true);\n        setEmail('');\n        setPassword('');\n      }\n\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <form onSubmit={handleSubmit} className=\"auth-form\">\n        <h2>{isLogin ? 'Iniciar Sesi√≥n' : 'Registrarse'}</h2>\n        \n        {error && <div className=\"error-box\">{error}</div>}\n\n        <div className=\"form-group\">\n          <label>Email</label>\n          <input\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            placeholder=\"tu@email.com\"\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Contrase√±a</label>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n            required\n          />\n        </div>\n        <button type=\"submit\">{isLogin ? 'Entrar' : 'Crear Cuenta'}</button>\n        \n        <p className=\"auth-toggle\" onClick={() => setIsLogin(!isLogin)}>\n          {isLogin \n            ? '¬øNo tienes cuenta? Reg√≠strate' \n            : '¬øYa tienes cuenta? Inicia sesi√≥n'}\n        </p>\n      </form>\n    </div>\n  );\n}\n\nexport default AuthPage;","import React, { useState, useEffect, useRef } from 'react';\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\nfunction ExpenseManager({ token, onLogout }) {\n  const [view, setView] = useState('dashboard');\n  \n  const [expenses, setExpenses] = useState([]);\n  const [incomes, setIncomes] = useState([]);\n  const [categories, setCategories] = useState([]);\n  \n  const [expenseFields, setExpenseFields] = useState([]);\n  const [incomeFields, setIncomeFields] = useState([]);\n\n  // Estados de formularios (CREAR)\n  const [expenseForm, setExpenseForm] = useState({});\n  const [incomeForm, setIncomeForm] = useState({});\n\n  // === ESTADO PARA LA EDICI√ìN (NUEVO) ===\n  const [editingItem, setEditingItem] = useState(null); // El objeto que estamos editando\n  const [editForm, setEditForm] = useState({}); // Los datos del formulario de edici√≥n\n\n  // Configuraci√≥n\n  const [newFieldName, setNewFieldName] = useState('');\n  const [newCatName, setNewCatName] = useState('');\n\n  // Refs Drag & Drop\n  const dragItem = useRef();\n  const dragOverItem = useRef();\n\n  const authedFetch = (url, options = {}) => {\n    const headers = { ...options.headers, 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` };\n    return fetch(url, { ...options, headers });\n  };\n\n  const loadData = () => {\n    authedFetch(`${API_URL}/expenses`).then(r => r.json()).then(setExpenses);\n    authedFetch(`${API_URL}/incomes`).then(r => r.json()).then(setIncomes);\n    authedFetch(`${API_URL}/categories`).then(r => r.json()).then(setCategories);\n    authedFetch(`${API_URL}/form-fields/expense`).then(r => r.json()).then(setExpenseFields);\n    authedFetch(`${API_URL}/form-fields/income`).then(r => r.json()).then(setIncomeFields);\n  };\n\n  useEffect(() => { if (token) loadData(); }, [token]);\n\n  // === L√ìGICA DE REORDENAMIENTO (Drag & Drop) ===\n  const saveOrder = async (items) => {\n    const orderedIds = items.map(i => i.id);\n    await authedFetch(`${API_URL}/form-fields/reorder`, { method: 'PUT', body: JSON.stringify({ orderedIds }) });\n  };\n\n  const handleSort = (context) => {\n    const isExpense = context === 'expense';\n    let _items = [...(isExpense ? expenseFields : incomeFields)];\n    const draggedItemContent = _items.splice(dragItem.current, 1)[0];\n    _items.splice(dragOverItem.current, 0, draggedItemContent);\n    dragItem.current = null; dragOverItem.current = null;\n    if (isExpense) setExpenseFields(_items); else setIncomeFields(_items);\n    saveOrder(_items);\n  };\n\n  const moveItem = (index, direction, context) => {\n    const isExpense = context === 'expense';\n    let _items = [...(isExpense ? expenseFields : incomeFields)];\n    if (direction === -1 && index === 0) return;\n    if (direction === 1 && index === _items.length - 1) return;\n    const temp = _items[index];\n    _items[index] = _items[index + direction];\n    _items[index + direction] = temp;\n    if (isExpense) setExpenseFields(_items); else setIncomeFields(_items);\n    saveOrder(_items);\n  };\n\n  const onDragStart = (e, index) => { dragItem.current = index; e.target.classList.add('dragging-item'); };\n  const onDragEnter = (e, index) => { dragOverItem.current = index; };\n  const onDragEnd = (e, context) => { e.target.classList.remove('dragging-item'); handleSort(context); };\n\n  // ==========================================\n  // MANEJADORES DE DATOS (CRUD)\n  // ==========================================\n\n  // --- ABRIR MODAL DE EDICI√ìN ---\n  const openEditModal = (item, type) => {\n    // Aplanamos los datos: sacamos lo que est√° en 'custom_data' al nivel ra√≠z\n    // para que el formulario lo entienda f√°cilmente.\n    const flatData = {\n      ...item,\n      ...(item.custom_data || {})\n    };\n    setEditingItem({ ...flatData, type }); // Guardamos el tipo (expense/income) para saber a qu√© URL enviar\n    setEditForm(flatData); // Llenamos el formulario\n  };\n\n  // --- GUARDAR EDICI√ìN ---\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    if (!editingItem) return;\n\n    const url = editingItem.type === 'expense' \n      ? `${API_URL}/expenses/${editingItem.id}` \n      : `${API_URL}/incomes/${editingItem.id}`;\n\n    const res = await authedFetch(url, { method: 'PUT', body: JSON.stringify(editForm) });\n    \n    if (res.ok) {\n      setEditingItem(null); // Cerrar modal\n      loadData(); // Recargar lista\n    } else {\n      alert('Error al actualizar.');\n    }\n  };\n\n  // --- CREAR NUEVO ---\n  const handleCreateChange = (e, context) => {\n    const { name, value } = e.target;\n    if (context === 'expense') setExpenseForm({ ...expenseForm, [name]: value });\n    else setIncomeForm({ ...incomeForm, [name]: value });\n  };\n\n  const handleEditChange = (e) => {\n    setEditForm({ ...editForm, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e, context) => {\n    e.preventDefault();\n    const url = context === 'expense' ? `${API_URL}/expenses` : `${API_URL}/incomes`;\n    const body = context === 'expense' ? expenseForm : incomeForm;\n    const res = await authedFetch(url, { method: 'POST', body: JSON.stringify(body) });\n    if (res.ok) {\n      context === 'expense' ? setExpenseForm({}) : setIncomeForm({});\n      loadData();\n    } else { alert('Error al guardar.'); }\n  };\n\n  const handleDelete = async (type, id) => {\n    if (window.confirm('¬øBorrar elemento?')) { await authedFetch(`${API_URL}/${type}/${id}`, { method: 'DELETE' }); loadData(); }\n  };\n\n  // --- CONFIGURACI√ìN ---\n  const handleAddField = async (context) => {\n    if (!newFieldName) return;\n    await authedFetch(`${API_URL}/form-fields`, { method: 'POST', body: JSON.stringify({ context, label: newFieldName, type: 'text' }) });\n    setNewFieldName(''); loadData();\n  };\n  const handleDeleteField = async (id) => {\n    if (window.confirm('¬øOcultar/Eliminar campo?')) { await authedFetch(`${API_URL}/form-fields/${id}`, { method: 'DELETE' }); loadData(); }\n  };\n  const handleAddCategory = async (e) => {\n    e.preventDefault();\n    if (!newCatName) return;\n    await authedFetch(`${API_URL}/categories`, { method: 'POST', body: JSON.stringify({ name: newCatName }) });\n    setNewCatName(''); loadData();\n  };\n  const handleDeleteCategory = async (id) => {\n    if (window.confirm('¬øBorrar categor√≠a?')) { await authedFetch(`${API_URL}/categories/${id}`, { method: 'DELETE' }); loadData(); }\n  };\n\n  // Helpers\n  const getFieldLabel = (key, context) => {\n    const fields = context === 'expense' ? expenseFields : incomeFields;\n    const found = fields.find(f => f.field_key === key);\n    return found ? found.label : key;\n  };\n  const allCats = [...new Set(['Varios', ...categories.map(c => c.name)])];\n  const totalInc = incomes.reduce((sum, i) => sum + parseFloat(i.amount), 0);\n  const totalExp = expenses.reduce((sum, e) => sum + parseFloat(e.amount), 0);\n\n  // RENDERIZADOR DE FORMULARIOS (Reutilizable para Crear y Editar)\n  const renderForm = (fields, context, state, handleChange) => (\n    <>\n      {fields.map(field => (\n        <div key={field.id} className=\"form-group\">\n          <label>{field.label}</label>\n          {field.type === 'select' ? (\n            <select name={field.field_key} value={state[field.field_key] || ''} onChange={(e) => handleChange(e, context)}>\n              <option value=\"\">Seleccione...</option>\n              {allCats.map(c => <option key={c} value={c}>{c}</option>)}\n            </select>\n          ) : (\n            <input\n              type={field.field_key === 'amount' ? 'number' : 'text'}\n              step={field.field_key === 'amount' ? '0.01' : undefined}\n              name={field.field_key}\n              value={state[field.field_key] || ''}\n              onChange={(e) => handleChange(e, context)}\n              placeholder={field.label}\n              className={!field.is_core ? 'dynamic-input' : ''}\n            />\n          )}\n        </div>\n      ))}\n    </>\n  );\n\n  // === RENDERIZADOR DE ITEMS EN LISTA (Dise√±o Limpio) ===\n  const renderItemContent = (item, type) => {\n    // Juntamos todos los datos en un solo objeto para iterar\n    const allData = { ...item, ...item.custom_data };\n    \n    // Obtenemos los campos configurados para saber el orden correcto\n    const fieldsConfig = type === 'expense' ? expenseFields : incomeFields;\n\n    return (\n      <div className=\"item-details\">\n        {/* Iteramos sobre la configuraci√≥n para respetar el orden del usuario */}\n        {fieldsConfig.map(field => {\n          const value = allData[field.field_key];\n          if (!value) return null; // Si no hay dato, no mostramos nada\n\n          return (\n            <div key={field.id} className=\"field-row\">\n              <span className=\"field-label\">{field.label}:</span>\n              <span className=\"field-value\">{value}</span>\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  // === VISTA: CONFIGURACI√ìN ===\n  if (view.startsWith('settings_')) {\n    const isExpense = view === 'settings_expense';\n    const context = isExpense ? 'expense' : 'income';\n    const fields = isExpense ? expenseFields : incomeFields;\n\n    return (\n      <div className=\"content settings-view\">\n        <header className=\"settings-header\">\n          <button onClick={() => setView('dashboard')} className=\"back-btn\">‚¨Ö Volver</button>\n          <h2>‚öôÔ∏è Configuraci√≥n {isExpense ? 'Gastos' : 'Ingresos'}</h2>\n        </header>\n        <div className=\"settings-grid\">\n          <div className=\"settings-card\">\n            <h3>Orden de Campos</h3>\n            <ul className=\"sortable-list\">\n              {fields.map((f, index) => (\n                <li key={f.id} draggable onDragStart={(e) => onDragStart(e, index)} onDragEnter={(e) => dragOverItem.current = index} onDragEnd={(e) => onDragEnd(e, context)} onDragOver={(e) => e.preventDefault()} className=\"draggable-item\">\n                  <div className=\"drag-handle\">‚ò∞</div>\n                  <div className=\"field-info\"><strong>{f.label}</strong>{f.is_core && <small>(Default)</small>}</div>\n                  <div className=\"field-actions\">\n                    <div className=\"arrow-controls\">\n                      <button onClick={() => moveItem(index, -1, context)} disabled={index===0}>‚ñ≤</button>\n                      <button onClick={() => moveItem(index, 1, context)} disabled={index===fields.length-1}>‚ñº</button>\n                    </div>\n                    {f.field_key !== 'amount' ? <button onClick={() => handleDeleteField(f.id)} className=\"delete-btn\">&times;</button> : <span style={{opacity:0.3, padding:'0 10px'}}>üîí</span>}\n                  </div>\n                </li>\n              ))}\n            </ul>\n            <div className=\"mini-form\" style={{marginTop: 20}}>\n              <input value={newFieldName} onChange={e => setNewFieldName(e.target.value)} placeholder=\"Nuevo Campo...\" />\n              <button onClick={() => handleAddField(context)}>+</button>\n            </div>\n          </div>\n          {isExpense && fields.find(f => f.field_key === 'category') && (\n            <div className=\"settings-card\">\n              <h3>Categor√≠as</h3>\n              <ul>{categories.map(c => <li key={c.id}>{c.name} <button onClick={() => handleDeleteCategory(c.id)} className=\"delete-btn\">&times;</button></li>)}</ul>\n              <form onSubmit={handleAddCategory} className=\"mini-form\"><input value={newCatName} onChange={e => setNewCatName(e.target.value)} placeholder=\"Nueva...\" /><button type=\"submit\">+</button></form>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  // === VISTA: DASHBOARD ===\n  return (\n    <>\n      <header>\n        <h1>Mi Gestor üí∏</h1>\n        <button onClick={onLogout} className=\"logout-btn\">Cerrar Sesi√≥n</button>\n      </header>\n      \n      <div className=\"balance-bar\">\n        <div className=\"balance-card income\"><span>Ingresos</span><span>+${totalInc.toFixed(2)}</span></div>\n        <div className=\"balance-card expense\"><span>Gastos</span><span>-${totalExp.toFixed(2)}</span></div>\n        <div className=\"balance-card balance\"><span>Balance</span><span style={{color:(totalInc - totalExp)>=0?'#27ae60':'#c0392b'}}>${(totalInc - totalExp).toFixed(2)}</span></div>\n      </div>\n\n      <div className=\"content\">\n        <div className=\"forms-column\">\n          <form onSubmit={(e) => handleSubmit(e, 'income')} className=\"income-form\">\n            <div className=\"form-header\"><h2>A√±adir Ingreso</h2><button type=\"button\" className=\"gear-btn\" onClick={() => setView('settings_income')}>‚öôÔ∏è</button></div>\n            {renderForm(incomeFields, 'income', incomeForm, handleCreateChange)}\n            <button type=\"submit\">Guardar</button>\n          </form>\n          <form onSubmit={(e) => handleSubmit(e, 'expense')} className=\"expense-form\">\n            <div className=\"form-header\"><h2>Nuevo Gasto</h2><button type=\"button\" className=\"gear-btn\" onClick={() => setView('settings_expense')}>‚öôÔ∏è</button></div>\n            {renderForm(expenseFields, 'expense', expenseForm, handleCreateChange)}\n            <button type=\"submit\">Guardar</button>\n          </form>\n        </div>\n\n        <div className=\"lists-column\">\n          <div className=\"income-list\">\n            <h3>Ingresos</h3>\n            {incomes.map(inc => (\n              <article key={inc.id} className=\"income-card\">\n                {renderItemContent(inc, 'income')}\n                <div className=\"card-actions\">\n                  <button onClick={() => openEditModal(inc, 'income')} className=\"edit-btn\">‚úèÔ∏è</button>\n                  <button onClick={() => handleDelete('incomes', inc.id)} className=\"delete-btn\">&times;</button>\n                </div>\n              </article>\n            ))}\n          </div>\n          <div className=\"expense-list\">\n            <h3>Gastos</h3>\n            {expenses.map(exp => (\n              <article key={exp.id} className=\"expense-card\">\n                {renderItemContent(exp, 'expense')}\n                <div className=\"card-actions\">\n                  <button onClick={() => openEditModal(exp, 'expense')} className=\"edit-btn\">‚úèÔ∏è</button>\n                  <button onClick={() => handleDelete('expenses', exp.id)} className=\"delete-btn\">&times;</button>\n                </div>\n              </article>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* === MODAL DE EDICI√ìN === */}\n      {editingItem && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h2>Editar {editingItem.type === 'expense' ? 'Gasto' : 'Ingreso'}</h2>\n            <form onSubmit={handleUpdate}>\n              {renderForm(\n                editingItem.type === 'expense' ? expenseFields : incomeFields, \n                editingItem.type, \n                editForm, \n                handleEditChange\n              )}\n              <div className=\"modal-buttons\">\n                <button type=\"button\" onClick={() => setEditingItem(null)} className=\"cancel-btn\">Cancelar</button>\n                <button type=\"submit\" className=\"save-btn\">Guardar Cambios</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default ExpenseManager;","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport AuthPage from './AuthPage'; // Nuevo componente\nimport ExpenseManager from './ExpenseManager'; // Nuevo componente\n\nfunction App() {\n  // Intentamos leer el token guardado en el navegador\n  const [token, setToken] = useState(localStorage.getItem('token'));\n\n  // Efecto para guardar/borrar el token del localStorage\n  useEffect(() => {\n    if (token) {\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('token');\n    }\n  }, [token]);\n\n  // Funci√≥n de Logout\n  const handleLogout = () => {\n    setToken(null);\n  };\n\n  return (\n    <div className=\"container\">\n      {token ? (\n        // Si hay token, mostramos el Gestor de Gastos\n        <ExpenseManager token={token} onLogout={handleLogout} />\n      ) : (\n        // Si NO hay token, mostramos la p√°gina de Login/Registro\n        <AuthPage onLoginSuccess={setToken} />\n      )}\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}